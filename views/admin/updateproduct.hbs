<script>
  window.onload= ()=>{
  categorys()
}
</script>

<section>
  <h3 class="headings">Edit Product</h3>
  <div class="container mb-5">
    <div class="row d-flex justify-content-center">
      <form
        action="/admin/editproduct/{{product._id}}"
        method="post"
        enctype="multipart/form-data"
        style="width: 100%; max-width: 500px;"
      >
        <div class="form-group mt-3">
          <label for="exampleFormControlInput1">Brand Name</label>
          <input
            type="text"
            class="form-control"
            id="exampleFormControlInput1"
            name="brandname"
            value="{{product.brandname}}"
          />
        </div>
        <div class="form-group mt-3">
          <label for="exampleFormControlInput1" >Category</label>
          <input value="{{product.category}}" id="productcategory" style="display: none;">Category</input>
          <select class="form-control" name="category" id="cat" onloadeddata="categorys(event)">
            <option id="cat_option" value="Default">Default</option>
            <option id="cat_option"  value="Base Model">Base Model</option>
            <option id="cat_option" value="Touch" >Touch</option>
            <option id="cat_option" value="Premimuem">Premimuem</option>
            <option id="cat_option" value="Others">Others</option>
          </select>

        </div>

        <div class="form-group mt-3">
          <label for="exampleFormControlInput1">Price</label>
          <input
            type="text"
            class="form-control"
            id="exampleFormControlInput1"
            name="price"
            value="{{product.price}}"
          />
        </div>
<div style="display: flex; justify-content:center ;flex-direction:column;margin:1rem 0">
  <label style="text-align: center;">Image</label>


<img src="{{productimage}}"class="img-thumbnail"  alt="Responsive image" id="Imagesrc">
</div>
        <div class="form-group mt-3">
          <input
            type="file"
            class="form-control-file"
            name="image"
            id="Image" onchange="Viewsrc(event)"
          />
        </div>
        <button type="submit" class="btn btn-success mt-1">Success</button>
      </form>
    </div>
  </div>
</section>

 <script>
let Viewsrc=  (event) =>{
   document.getElementById("Imagesrc").src=URL.createObjectURL (event.target.files[0])
}

let categorys = (event)=>{
 let product_cat = document.getElementById("productcategory").value
 document.getElementById("cat").querySelectorAll('#cat_option').forEach(e=>{
  if (product_cat===e.value){
    e.selected="selected"
  }
 })

  }

</script>

